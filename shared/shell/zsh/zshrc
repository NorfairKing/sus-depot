# This file is sourced at any zsh interavtive shell
debug "sourcing .zshrc"
indent

# Path to your oh-my-zsh configuration.
ZSH=$HOME/.oh-my-zsh

ZSH_THEME="agnoster"

# Plugins
plugins=(taskwarrior wd)

# Use case-sensitive completion
CASE_SENSITIVE="true"

# No autocorrection
unsetopt correct_all 

precmd() {
  eval "$PROMPT_COMMAND"
  pwd >> $HOME/.latest_dirs

  if [[ "$(id -u)" -ne "0" ]]
  then
    mkdir -p ~/.logs
    echo "$(date +%Y-%m-%d.%H:%M:%S) $(pwd) $(history | tail --lines=1)" >> "$HOME/.logs/shell-history-$(date +%Y-%m-%d).log"
  fi
}


safe_source $ZSH/oh-my-zsh.sh
safe_source ~/.aliases/aliases

autoload bashcompinit
bashcompinit

make_completion() {
  local bin=$1
  source <($bin --bash-completion-script `which $bin`)
}
make_completion note-client
make_completion note-server
make_completion note-automation
make_completion orc
make_completion pe
. <(azure --completion)

outdent

